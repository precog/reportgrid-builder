define(["jquery","config/themes"],function(e,t){function r(e){return n+e+"/jquery-ui.css"}function i(e,t){function n(){try{var r=document.styleSheets;for(var i=0,s=r.length;i<s;i++)r[i].href==e&&r[i].cssRules;setTimeout(t,0)}catch(o){setTimeout(n,20)}}n()}function s(t,n){var s=r(t),o=e('<link href="'+s+'" type="text/css" rel="stylesheet" class="ui-theme" />');e.browser.safari?i(s,n):o.on("load",n),e("head").append(o),e("link.ui-theme").size()>3&&e("link.ui-theme:first").remove()}var n="css/jquery-ui/";return function(e){var n;e.on("theme.change",function(r,i){if(n===i)return;n=i,e.trigger("theme.changing",i),s(t.map[i].ui,function(){e.trigger("view.theme.changed",i)})})}})