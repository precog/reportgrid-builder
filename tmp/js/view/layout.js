define(["jquery","text!templates/layout.full.html","lib/jquery-ui/jquery.ui","lib/jquery-layout/jquery.layout"],function(e,t){var n=38,r={resizable:!1,closable:!1,slidable:!1,size:36,spacing_open:0,spacing_closed:0},i={resizable:!1,closable:!1,slidable:!1,size:50,spacing_open:0,spacing_closed:0};return function(s){function a(e,t){o.push(e.layout(t,{defaults:{initClosed:!1,resizable:!0,slidable:!0}}))}function f(){var e=u.parent();u.css({position:"absolute",width:e.innerWidth()+"px",height:e.innerHeight()+"px"})}function l(){for(var e=0;e<o.length;e++)o[e].resizeAll()}function c(){if(!u){clearInterval(this.killTimer),killTimer=setTimeout(h,20);return}l()}function h(o,c){var h=e(c);h.css({position:"relative",padding:0}),h.is("body")&&(h.css({margin:0,width:"100%",height:"100%",overflow:"hidden",border:"none"}),h.parent().css({height:"100%",overflow:"hidden"})),u=e(t),h.append(u),f(),a(u,{north:e.extend({},r,{size:n}),west:{size:200,initClosed:!1}}),a(u.find(".system"),{south:{size:"50%",initClosed:!1}}),a(u.find(".data"),{north:i}),a(u.find(".reports"),{north:i}),a(u.find(".main"),{east:{size:"20%",initClosed:!1,minSize:200,maxSize:600,maskIframesOnResize:!0}}),a(u.find(".builder"),{north:r}),u.addClass("ui-widget-content").find(".pane").addClass("ui-widget-content"),u.find(".ui-layout-toggler").mouseenter(function(){e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).addClass("ui-widget-header"),u.find(".ui-layout-resizer").addClass("ui-widget-shadow"),u.find(".ui-layout-resizer-dragging").addClass("ui-state-hover"),s.trigger("view.main.toolbar-main",u.find(".mainbar .toolbar-main")),s.trigger("view.main.toolbar-context",u.find(".mainbar .toolbar-context")),s.trigger("view.data.pane",u.find(".data")),s.trigger("view.data.toolbar-description",u.find(".data .toolbar-description")),s.trigger("view.data.toolbar-main",u.find(".data .toolbar-main")),s.trigger("view.data.toolbar-context",u.find(".data .toolbar-context")),s.trigger("view.reports.pane",u.find(".reports")),s.trigger("view.reports.toolbar-description",u.find(".reports .toolbar-description")),s.trigger("view.reports.toolbar-main",u.find(".reports .toolbar-main")),s.trigger("view.reports.toolbar-context",u.find(".reports .toolbar-context")),s.trigger("view.support.pane",u.find(".main .support")),s.trigger("view.editor.tabs",u.find(".builder .tabs-container")),s.trigger("view.editor.toolbar-context",u.find(".builder .toolbar-context:first")),e(window).resize(f),setTimeout(l,100)}var o=[],u;s.on("view.container.ready",h),s.on("theme.changed",c)}})